<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download TailFree</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="/assets/favicon.png">
</head>
<body>
    <header>
        <a href="/" class="back-btn">â¬… Back to Home</a>
    </header>

    <main>
        <div class="download-container">
            <div class="left">
                <h1 class="fade-in">Download TailFree</h1>
                <p class="fade-in">Get the latest version of the smooth tail-less cursor!</p>
            </div>
            <div class="right fade-in">
                <div class="download-box">
                    <img src="/assets/download.png" alt="Download Icon" class="download-icon">
                    <p>Version: <strong id="version">Loading...</strong></p>
                    <p>Size: <strong id="size">Loading...</strong></p>
                    <p>Release Date: <strong id="release-date">Loading...</strong></p>
                    <a id="download-link" href="#" class="btn">Download Now</a>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 TailFree. All rights reserved.</p>
    </footer>

    <script>
        async function fetchLatestRelease() {
            try {
                const response = await fetch('https://api.github.com/repos/Abhinav2011VS/TailFree-Application/releases/latest');
                const data = await response.json();
                const asset = data.assets[0];

                if (!asset) {
                    throw new Error('No assets found in the latest release.');
                }

                const version = data.tag_name;
                const size = (asset.size / (1024 * 1024)).toFixed(2) + ' MB'; // Convert bytes to MB
                const releaseDate = new Date(data.published_at).toLocaleDateString('en-US', { month: 'long', year: 'numeric' }); // Format as "February 2025"
                const downloadUrl = asset.browser_download_url;

                document.getElementById('version').textContent = version;
                document.getElementById('size').textContent = size;
                document.getElementById('release-date').textContent = releaseDate;
                document.getElementById('download-link').href = downloadUrl;
            } catch (error) {
                console.error('Error fetching the latest release:', error);
                document.getElementById('version').textContent = "N/A";
                document.getElementById('size').textContent = "N/A";
                document.getElementById('release-date').textContent = "N/A";
            }
        }

        fetchLatestRelease();
    </script>
</body>
</html>
